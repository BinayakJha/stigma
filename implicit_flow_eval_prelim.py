import matplotlib.pyplot as plt
import os

plt.rcParams.update({'font.size': 14})

# weawow, 1weather, Leaks
labels = ["Weawow", "1Weather", "Leaks"]

# this data was generated by hand by running
# the apps through stigma and then running
# them on a phone and counting logcat messages

# see APK/implicit_flows_eval/ folder
sensitive_info_obtained = [8, 24, 42]
implicit_flow_identified = [2, 0, 28]


x = list(range(0, len(sensitive_info_obtained)))
width = 0.35
x_leftside = list(map(lambda x: x-width/2, x))
print(x_leftside)
x_rightside = list(map(lambda x: x+width/2, x))


fig, ax = plt.subplots()
rects1 = ax.bar(x_leftside, sensitive_info_obtained, width, label='Sensitive Info Obtained')
rects2 = ax.bar(x_rightside, implicit_flow_identified, width, label='Implicit Flow Identified')

# Add some text for labels, title and custom x-axis tick labels, etc.
ax.set_ylabel('Count')
ax.set_title('Implicit Flows Involving Sensitive Data')
ax.set_xticks(x)
ax.set_xticklabels(labels)
ax.legend()


#ax.bar_label(rects1, padding=3)
#ax.bar_label(rects2, padding=3)

fig.tight_layout()


path = "./implicit_flow_eval_prelim.eps"
plt.savefig(path, format="eps", dpi=500)
print("output: " + str(os.path.abspath(path)))

print("Showing Graph Now...")
plt.show()

